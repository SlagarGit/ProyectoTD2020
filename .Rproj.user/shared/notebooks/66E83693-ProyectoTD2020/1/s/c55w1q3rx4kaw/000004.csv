"0","cortes <- grep(pattern = ""^01/01/.* 0:00$"", All$fecha.y.hora)"
"0","TD <- All %>%"
"0","      mutate(fecha.y.hora = dmy_hm(fecha.y.hora),"
"0","             carril = ifelse(row_number() < cortes[2], 1,"
"0","                      ifelse(row_number() < cortes[3], 2,"
"0","                      ifelse(row_number() < cortes[4], 3,"
"0","                      ifelse(row_number() < cortes[5], 4,"
"0","                      ifelse(row_number() < cortes[6], 1,"
"0","                      ifelse(row_number() < cortes[7], 2,"
"0","                      ifelse(row_number() < cortes[8], 3, 4)))))))) %>%"
"0","      complete(fecha.y.hora = seq.POSIXt(min(fecha.y.hora), max(fecha.y.hora),"
"0","                                         by = ""mins""), carril) %>%"
"0","      mutate(semana = (week(fecha.y.hora) - (week(min(fecha.y.hora)))),"
"0","             dia_semana = wday(fecha.y.hora, label = TRUE, abbr = FALSE)) %>%"
"0","      arrange(fecha.y.hora) %>%"
"0","      separate(fecha.y.hora, c(""anio"", ""mes"", ""resto""),"
"0","               sep = ""-"", convert = TRUE) %>%"
"0","      separate(resto, c(""dia"", ""tiempo""),"
"0","               sep = "" "", convert = TRUE) %>%"
"0","      separate(tiempo, c(""hora"", ""minutos"", ""segundos""),"
"0","               sep = "":"", convert = TRUE) %>%"
"0","      select(-segundos) %>%"
"0","      select(semana, dia_semana, dia, mes, anio, everything()) %>%"
"0","      mutate_if(is.character, as.numeric) %>%"
"0","      mutate(carril = as.factor(carril),"
"0","             mes = month(mes, label = TRUE))"
"0",""
"0","colnames(TD) <- gsub(""."", "" "", colnames(TD), fixed = TRUE)"
